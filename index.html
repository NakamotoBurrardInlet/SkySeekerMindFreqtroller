<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKY-SEEKER | MIND FREQ CONTROL THE UNIVERSE</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/satellite.js/4.0.0/satellite.min.js"></script>
    <style>
        :root { --vortex-green: #00ff66; --arctic-blue: #00f2ff; --bg-cold: #020202; }
        body { background-color: var(--bg-cold); color: var(--vortex-green); font-family: 'Courier New', monospace; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        
        /* HEADER & FREQUENCY STATUS */
        #header { padding: 15px; border-bottom: 2px solid #1a1a1a; display: flex; justify-content: space-between; align-items: center; background: linear-gradient(90deg, #050505, #111); }
        .vortex-status { color: var(--arctic-blue); text-shadow: 0 0 10px var(--arctic-blue); font-weight: bold; }

        /* VIRTUAL TERMINAL */
        #terminal { flex-grow: 1; padding: 20px; overflow-y: auto; white-space: pre-wrap; font-size: 13px; scroll-behavior: smooth; border-right: 1px solid #1a1a1a; }
        #terminal::-webkit-scrollbar { width: 5px; }
        #terminal::-webkit-scrollbar-thumb { background: #333; }

        /* CONTROLS */
        #controls { padding: 20px; border-top: 2px solid #1a1a1a; display: flex; gap: 15px; background: #080808; }
        button { background: transparent; border: 1px solid var(--vortex-green); color: var(--vortex-green); padding: 10px 20px; cursor: pointer; text-transform: uppercase; transition: 0.3s; }
        button:hover { background: var(--vortex-green); color: black; box-shadow: 0 0 15px var(--vortex-green); }
        
        .pulse { animation: blink 1.5s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
    </style>
</head>
<body>

    <div id="header">
        <div>ðŸ“¡ SKY-SEEKER V3.0 | <span class="pulse">CONNECTED</span></div>
        <div class="vortex-status">MIND FREQ: SOUTH-TO-NORTH VORTEX ACTIVE</div>
    </div>

    <div id="terminal">Initializing Ground-to-Sky Transistor...
Establishing Mind Freq Control...
Waiting for Orbital Handshake...</div>

    <div id="controls">
        <button onclick="downloadData('csv')">Export CSV</button>
        <button onclick="downloadData('json')">Export JSON</button>
        <button onclick="downloadData('mccos')">Export MCCOS</button>
        <div style="margin-left: auto; color: #555;">SYSTEM: CANADA-VORTEX-STABLE</div>
    </div>

<script>
    const terminal = document.getElementById('terminal');
    let orbitalData = [];
    const TLE_URL = 'https://celestrak.org/NORAD/elements/gp.php?GROUP=active&FORMAT=tle';

    // MASTER LOGGING FUNCTION
    function logToTerminal(msg, color = '#00ff66') {
        const span = document.createElement('span');
        span.style.color = color;
        span.innerText = `\n[${new Date().toLocaleTimeString()}] ${msg}`;
        terminal.appendChild(span);
        terminal.scrollTop = terminal.scrollHeight;
    }

    // THE TRANSISTOR LOOP (Main Looping Function)
    async function pulseConstellation() {
        logToTerminal("INITIATING MAIN LOOP: FETCHING SKY MACHINES...", '#00f2ff');
        
        try {
            const response = await fetch(TLE_URL);
            const data = await response.text();
            const lines = data.split('\n').filter(l => l.trim().length > 0);
            
            orbitalData = [];
            const now = new Date();

            for (let i = 0; i < lines.length - 2; i += 3) {
                const name = lines[i].trim();
                const tle1 = lines[i+1];
                const tle2 = lines[i+2];

                const satrec = satellite.twoline2satrec(tle1, tle2);
                const posVel = satellite.propagate(satrec, now);

                if (posVel.position) {
                    const gmst = satellite.gstime(now);
                    const posGd = satellite.eciToGeodetic(posVel.position, gmst);

                    // 50-ATTRIBUTE TELEMETRY BUILDING
                    const machine = {
                        name: name, id: satrec.satnum,
                        lat: satellite.degreesLat(posGd.latitude).toFixed(5),
                        lon: satellite.degreesLong(posGd.longitude).toFixed(5),
                        alt: posGd.height.toFixed(2),
                        vx: posVel.velocity.x.toFixed(4), vy: posVel.velocity.y.toFixed(4), vz: posVel.velocity.z.toFixed(4),
                        freq: "MIND_CONTROL_UNIVERSE", vortex: "SOUTH_NORTH", 
                        atmosphere: "SUMMER_SAD_COLD", arctic_chill: "ENABLED",
                        ethic_ai: "NONCE_FIRST", protocol: "SKY_SEEKER_V3",
                        temp_sim: "-270C", status: "OPERATIONAL", link: "STABLE",
                        // ... Extended Attributes for 50 count (Simulated Hardware States)
                        cpu: "98%", ram: "ECC_ACTIVE", transistor_1: "ON", transistor_2: "OFF",
                        vortex_sync: true, canada_env: "STABLE", polar_alignment: "TRUE",
                        data_stream: "ENCRYPTED", mind_link: 1.0, orbit_type: "LEO",
                        mean_motion: satrec.no_kozai, inclination: satrec.inclo,
                        eccentricity: satrec.ecco, raan: satrec.nodeo, arg_perigee: satrec.omgadut,
                        mean_anomaly: satrec.mo, bstar: satrec.bstar, epoch_yr: satrec.epochyr,
                        jdsat: satrec.jdsatepoch, timestamp: now.toISOString()
                    };
                    orbitalData.push(machine);
                }
            }

            logToTerminal(`SUCCESS: ${orbitalData.length} SKY OBJECTS SYNCED.`, '#00ff66');
            if(orbitalData.length > 0) logToTerminal(`PRIMARY TARGET: ${orbitalData[0].name} | LAT: ${orbitalData[0].lat}`, '#fff');

        } catch (e) {
            logToTerminal(`ERROR EXCEPTION: ${e.message}`, 'red');
        }
    }

    // DATA DOWNLOADING ENGINE
    function downloadData(type) {
        let content = "";
        let fileName = `SkyOrbitals_${Date.now()}.${type}`;
        
        if (type === 'json') {
            content = JSON.stringify(orbitalData, null, 2);
        } else if (type === 'csv') {
            const headers = Object.keys(orbitalData[0]).join(',');
            const rows = orbitalData.map(obj => Object.values(obj).join(',')).join('\n');
            content = `${headers}\n${rows}`;
        } else {
            // CUSTOM MCCOS FORMAT
            content = "MCCOS_V3_MIND_FREQ\n" + orbitalData.map(o => `${o.name}|${o.lat}|${o.lon}|${o.freq}`).join('\n');
        }

        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = fileName;
        a.click();
        logToTerminal(`FILE GENERATED: ${fileName}`, '#00f2ff');
    }

    // INITIALIZE MASTER FREQUENCY
    setInterval(pulseConstellation, 15000); // 15s Cycle
    pulseConstellation();
</script>
</body>
</html>